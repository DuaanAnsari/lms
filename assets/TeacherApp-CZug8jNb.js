import{r as n,j as e,u as M,a as U,N as J,O as W,b as I,R as Y,d as E,e as K}from"./index-CaqurIt2.js";import{F as X,a as Z,b as ee,l as R,c as O}from"./apiUtils-4OWgz6zd.js";const se=({toggleSidebar:i})=>{const[j,r]=n.useState("Home"),[y,x]=n.useState(!0),[p,h]=n.useState(!1),[g,m]=n.useState(!1),[f,c]=n.useState(""),[u,v]=n.useState({username:"",email:"",firstLetter:""}),l=()=>{h(!p),m(!1)},C=()=>{m(!g),h(!1)},T=()=>{m(!1),h(!1),window.confirm("Are you sure you want to logout?")&&R("/")},o=[],a=[{id:5,label:"Logout",icon:e.jsx(ee,{})}];return n.useEffect(()=>{const s=sessionStorage.getItem("userName"),d=sessionStorage.getItem("email"),S=s?s.charAt(0).toUpperCase():"";v({username:s,email:d,firstLetter:S})},[]),n.useEffect(()=>{const s=d=>{!d.target.closest(".notification-container")&&!d.target.closest(".profile-container")&&(h(!1),m(!1))};return document.addEventListener("mousedown",s),()=>{document.removeEventListener("mousedown",s)}},[]),e.jsxs("header",{className:"main-header",children:[e.jsxs("div",{className:"header-left",children:[e.jsx("button",{className:"mobile-toggle-btn",onClick:i,children:e.jsx("i",{className:"bi bi-list"})}),e.jsx("h1",{children:"Teacher Dashboard"})]}),e.jsxs("div",{className:"header-actions",children:[e.jsxs("div",{className:"notification-container",children:[e.jsxs("button",{className:"notification-btn",onClick:l,children:[e.jsx(X,{}),o.filter(s=>s.unread).length>0&&e.jsx("span",{className:"notification-badge",children:o.filter(s=>s.unread).length})]}),p&&e.jsxs("div",{className:"notification-dropdown",children:[e.jsxs("div",{className:"dropdown-header",children:[e.jsx("h3",{children:"Notifications"}),e.jsxs("span",{className:"notification-count",children:[o.filter(s=>s.unread).length," new"]})]}),e.jsx("div",{className:"notification-list",children:o.map(s=>e.jsxs("div",{className:`notification-item ${s.unread?"unread":""}`,children:[e.jsxs("div",{className:"notification-content",children:[e.jsx("h4",{children:s.title}),e.jsx("p",{children:s.message}),e.jsx("span",{className:"notification-time",children:s.time})]}),s.unread&&e.jsx("div",{className:"unread-dot"})]},s.id))}),e.jsx("div",{className:"dropdown-footer",children:e.jsx("button",{className:"view-all-btn",children:"View All Notifications"})})]})]}),e.jsxs("div",{className:"profile-container",children:[e.jsx("button",{className:"profile-btn",onClick:C,children:e.jsx(Z,{})}),g&&e.jsxs("div",{className:"profile-dropdown",children:[e.jsxs("div",{className:"profile-header",children:[e.jsx("div",{className:"profile-avatar",children:u.firstLetter}),e.jsxs("div",{className:"profile-info",children:[e.jsx("h3",{children:u.username}),e.jsx("p",{children:u.email})]})]}),e.jsx("div",{className:"profile-menu",children:a.map(s=>e.jsxs("button",{className:"profile-option",onClick:s.label==="Logout"?T:void 0,children:[e.jsx("span",{className:"option-icon",children:s.icon}),e.jsx("span",{className:"option-label",children:s.label})]},s.id))})]})]})]})]})},ae=({isSidebarOpen:i,toggleSidebar:j})=>{M();const r=U(),[y,x]=n.useState("Home"),[p,h]=n.useState(""),[g,m]=n.useState({username:"",email:"",firstLetter:""}),f=()=>{window.confirm("Are you sure you want to logout?")&&R("/")};n.useEffect(()=>{const l=sessionStorage.getItem("userName"),C=sessionStorage.getItem("email"),T=l?l.charAt(0).toUpperCase():"";m({username:l,email:C,firstLetter:T})},[]);const c=[{id:1,name:"Home",icon:"bi-house",path:"/teacher/dashboard/home"},{id:2,name:"Assignments",icon:"bi-clipboard-check",path:"/teacher/dashboard/assignments"},{id:3,name:"Attendance",icon:"bi-calendar-check",path:"/teacher/dashboard/attendance"},{id:4,name:"Students",icon:"bi-people",path:"/teacher/dashboard/students"}],u=l=>h(l.target.value),v=()=>h("");return n.useEffect(()=>{const l=r.pathname.split("/").pop();if(l){const C=l.charAt(0).toUpperCase()+l.slice(1);x(C)}},[r.pathname]),e.jsxs("div",{className:`sidebar ${i?"open":"closed"}`,children:[e.jsxs("div",{className:"sidebar-header",children:[e.jsxs("div",{className:"logo-section",children:[e.jsx("div",{className:"logo",children:"L"}),i&&e.jsx("h2",{className:"sidebar-title",children:"LMS Portal"})]}),e.jsx("button",{className:"sidebar-toggle",onClick:j,children:e.jsx("i",{className:`bi ${i?"bi-chevron-left":"bi-chevron-right"}`})})]}),e.jsx("div",{className:"search-section",children:i?e.jsxs("div",{className:"search-bar",children:[e.jsx("i",{className:"bi bi-search search-icon"}),e.jsx("input",{type:"text",placeholder:"Search...",className:"search-input",value:p,onChange:u}),p&&e.jsx("button",{className:"clear-search-btn",onClick:v,children:e.jsx("i",{className:"bi bi-x"})})]}):e.jsx("div",{className:"search-icon-only",children:e.jsx("i",{className:"bi bi-search"})})}),e.jsx("nav",{className:"sidebar-nav",children:e.jsxs("div",{className:"nav-section",children:[e.jsx("h3",{className:"section-title",children:"Main Menu"}),e.jsx("ul",{className:"sidebar-menu",children:c.map(l=>e.jsx("li",{className:"sidebar-item",children:e.jsxs(J,{to:l.path,onClick:()=>window.innerWidth<=768&&j(),className:({isActive:C})=>`sidebar-link ${C?"active":""}`,children:[e.jsx("i",{className:`bi ${l.icon} sidebar-icon`}),i&&e.jsx("span",{className:"sidebar-text",children:l.name}),l.badge&&e.jsx("span",{className:"nav-badge",children:l.badge})]})},l.id))})]})}),e.jsx("div",{className:"sidebar-footer",children:e.jsxs("div",{className:"logout-section",onClick:f,children:[e.jsx("i",{className:"bi bi-box-arrow-right logout-icon"}),i&&e.jsx("span",{className:"logout-text",children:"Log out"})]})})]})};function te(){const[i,j]=n.useState(window.innerWidth>768),r=()=>{j(!i)},y=()=>{window.innerWidth<=768&&j(!1)};return e.jsxs("div",{className:"dashboard-container",children:[e.jsx("div",{className:`sidebar-overlay ${i?"visible":""}`,onClick:y}),e.jsx(ae,{isSidebarOpen:i,toggleSidebar:r}),e.jsxs("div",{className:`main-content ${i?"":"sidebar-closed"}`,children:[e.jsx(se,{toggleSidebar:r}),e.jsx("main",{className:"dashboard-main",children:e.jsx(W,{})})]})]})}const ne=()=>{const i=[{title:"Active Courses",value:5},{title:"Pending Assignments",value:3},{title:"Recent Grades",value:"A-"},{title:"Messages",value:2}];return e.jsxs("div",{className:"dashboard-content",children:[e.jsxs("div",{className:"welcome-section",children:[e.jsx("h2",{children:"Welcome back, John!"}),e.jsx("p",{children:"Here's what's happening with your courses today."})]}),e.jsx("div",{className:"dashboard-cards",children:i.map((j,r)=>e.jsxs("div",{className:"card",children:[e.jsx("h3",{children:j.title}),e.jsx("p",{className:"card-number",children:j.value})]},r))})]})},ie=()=>{const i=M(),{showSnackbar:j}=I(),[r,y]=n.useState(!1),[x,p]=n.useState(""),[h,g]=n.useState(""),[m,f]=n.useState(""),[c,u]=n.useState(new Date().toISOString().split("T")[0]),[v,l]=n.useState(""),[C,T]=n.useState([]),[o,a]=n.useState([]),[s,d]=n.useState([]),[S,N]=n.useState("All"),b="http://192.168.0.105",k=sessionStorage.getItem("jwtToken");n.useEffect(()=>{O(`${b}/api/Teacher/GetStandards`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${k}`}}).then(t=>t.json()).then(t=>{const q=t.map(D=>({id:D.s_Id,name:D.s_Name}));T(q)}).catch(t=>console.error(t))},[]),n.useEffect(()=>{O(`${b}/api/Teacher/GetAssignment?filter=${S}`,{method:"GET",headers:{Authorization:`Bearer ${k}`}}).then(t=>t.json()).then(t=>{a(t)}).catch(t=>console.error(t))},[S]),n.useEffect(()=>{const t=new Date,q=o,D=o.filter(P=>new Date(P.dueDate)<t),L=o.filter(P=>new Date(P.dueDate)>=t),Q=P=>P,z=[{Header:"Posted Assignments",value:q.length,items:Q(q)},{Header:"Pending Assignments",value:L.length,items:Q(L)},{Header:"Finished Assignments",value:D.length,items:Q(D)}];d(z)},[o]);const w=["Math","Science","English","History","Geography"],$=["MCQ","QA","VIDEO"],[A,F]=n.useState(null),[_,B]=n.useState(!1),G=({item:t})=>{const[q,D]=n.useState(!1);return e.jsxs("li",{className:`assignment-item ${q?"expanded":""}`,children:[e.jsxs("div",{className:"assignment-header-row",onClick:()=>D(!q),children:[e.jsx("span",{className:"assignment-title",children:t.title}),e.jsx("span",{className:`arrow-icon ${q?"rotated":""}`,children:"â–¼"})]}),q&&e.jsxs("div",{className:"assignment-details",children:[e.jsxs("div",{className:"detail-grid",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Description:"})," ",t.description]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Type:"})," ",t.assignmentType]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Due Date:"})," ",new Date(t.dueDate).toLocaleDateString()]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Created:"})," ",new Date(t.createdDate).toLocaleDateString()]})]}),e.jsx("button",{className:"view-details-btn",onClick:L=>{L.stopPropagation(),F(t),B(!0)},children:"View Full Details"})]})]})},H=t=>{if(t.preventDefault(),!x||!h||!c||!v||!m){j("Please fill in all fields before proceeding.","warning");return}m==="MCQ"?i("/teacher/dashboard/createassignment",{state:{selectedClass:x,selectedSubject:h,assignmentDate:c,dueDate:v,selectedCategory:m}}):m==="QA"?i("/teacher/dashboard/createquestionanswer",{state:{selectedClass:x,selectedSubject:h,assignmentDate:c,dueDate:v,selectedCategory:m}}):m==="VIDEO"&&i("/teacher/dashboard/createvideocomprehension",{state:{selectedClass:x,selectedSubject:h,assignmentDate:c,dueDate:v,selectedCategory:m}}),y(!1)};return e.jsxs("div",{className:"dashboard-content",children:[e.jsx("div",{className:"welcome-section",children:e.jsxs("div",{className:"assignments-header",children:[e.jsx("h2",{children:"Assignments"}),e.jsxs("div",{className:"assignments-controls",children:[e.jsxs("select",{value:S,onChange:t=>N(t.target.value),className:"filter-dropdown",children:[e.jsx("option",{value:"All",children:"All"}),e.jsx("option",{value:"Postedbyme",children:"Posted by me"})]}),e.jsx("button",{onClick:()=>y(!0),className:"add-assignment-btn",children:"Add Assignment"})]})]})}),e.jsx("div",{className:"dashboard-cards",children:s.map((t,q)=>e.jsxs("div",{className:"assignment-card",children:[e.jsx("h3",{children:t.Header})," ",e.jsx("p",{className:"card-number",children:t.value}),t.items?.length>0&&e.jsx("ul",{className:"card-list",children:t.items.map(D=>e.jsx(G,{item:D},D.assignmentId))})]},q))}),r&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal-content",children:[e.jsx("button",{className:"close-button",onClick:()=>y(!1),children:"Ã—"}),e.jsx("h3",{className:"modal-title",children:"Create Assignment"}),e.jsxs("form",{onSubmit:H,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Class:"}),e.jsxs("select",{value:x,onChange:t=>p(t.target.value),required:!0,children:[e.jsx("option",{value:"",children:"Select Class"}),C.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Subject:"}),e.jsxs("select",{value:h,onChange:t=>g(t.target.value),required:!0,children:[e.jsx("option",{value:"",children:"Select Subject"}),w.map(t=>e.jsx("option",{value:t,children:t},t))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Category:"}),e.jsxs("select",{value:m,onChange:t=>f(t.target.value),required:!0,children:[e.jsx("option",{value:"",children:"Select Category"}),$.map(t=>e.jsx("option",{value:t,children:t},t))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Assignment Date:"}),e.jsx("input",{type:"date",value:c,onChange:t=>u(t.target.value),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Due Date:"}),e.jsx("input",{type:"date",value:v,onChange:t=>l(t.target.value),required:!0})]}),e.jsxs("div",{className:"button-container",children:[e.jsx("button",{type:"button",onClick:()=>y(!1),className:"btn btn-cancel",children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-proceed",children:"Proceed"})]})]})]})}),_&&A&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal-content details-modal",children:[e.jsx("button",{className:"close-button",onClick:()=>B(!1),children:"Ã—"}),e.jsx("h3",{className:"modal-title",children:A.title}),e.jsxs("div",{className:"details-content",children:[e.jsxs("div",{className:"meta-info",children:[e.jsx("span",{className:"badge type-badge",children:A.assignmentType}),e.jsx("span",{className:"badge class-badge",children:A.standardName||"Class"})]}),e.jsx("p",{className:"description-text",children:A.description}),e.jsxs("div",{className:"questions-container",children:[e.jsx("h4",{children:"Questions"}),A.questions?.map((t,q)=>e.jsxs("div",{className:"question-block",children:[e.jsxs("p",{className:"question-text",children:[e.jsxs("strong",{children:["Q",q+1,":"]})," ",t.questionText]}),A.assignmentType==="MCQ"&&e.jsx("div",{className:"options-list",children:["A","B","C","D"].map(D=>{const L=t[`option${D}`];if(!L)return null;const Q=t.correctOption===D;return e.jsxs("div",{className:`option-item ${Q?"correct":""}`,children:[e.jsx("span",{className:"option-label",children:D}),e.jsx("span",{className:"option-text",children:L}),Q&&e.jsx("span",{className:"correct-icon",children:"âœ“"})]},D)})})]},t.questionId))]})]}),e.jsx("div",{className:"button-container",children:e.jsx("button",{onClick:()=>B(!1),className:"btn btn-cancel",children:"Close"})})]})})]})},ce=()=>{const i=U(),j=M(),r="http://192.168.0.105",y=sessionStorage.getItem("jwtToken"),{showSnackbar:x}=I(),{selectedClass:p,selectedSubject:h,assignmentDate:g,dueDate:m,selectedCategory:f}=i.state||{},[c,u]=n.useState([{question:"",options:["","","",""],correctOption:"A"}]),v=()=>{u([...c,{question:"",options:["","","",""],correctOption:"A"}])},l=o=>{c.length>1?u(c.filter((a,s)=>s!==o)):x("At least one question is required!","warning")},C=(o,a,s,d=null)=>{const S=[...c];a==="question"?S[o].question=s:a==="option"?S[o].options[d]=s:a==="correctOption"&&(S[o].correctOption=s),u(S)},T=async o=>{o.preventDefault();const a={title:h,description:"Multiple Choise Questions",dueDate:m,teacherId:1,standardId:p,assignmentType:f,questions:c.map(s=>({questionText:s.question,optionA:s.options[0],optionB:s.options[1],optionC:s.options[2],optionD:s.options[3],correctOption:s.correctOption}))};try{const s=await O(`${r}/api/Teacher/AddAssignment`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${y}`},body:JSON.stringify(a)});if(s.ok)x("âœ… Assignment Created Successfully!","success"),j("/teacher/dashboard/assignments");else{const d=await s.text();x("âŒ Failed to create assignment: "+d,"error")}}catch(s){console.error(s),x("Error while creating assignment!","error")}};return e.jsx("div",{className:"create-assignment-page fade-in",children:e.jsxs("div",{className:"assignment-container",children:[e.jsxs("div",{className:"page-header",children:[e.jsxs("button",{onClick:()=>j(-1),className:"back-btn",children:[e.jsx("i",{className:"bi bi-arrow-left"})," Back"]}),e.jsxs("h2",{className:"page-title",children:[e.jsx("i",{className:"bi bi-pencil-square header-icon"}),"Create Assignment"]})]}),e.jsxs("div",{className:"content-grid",children:[e.jsx("div",{className:"details-column",children:e.jsxs("div",{className:"glass-panel details-card",children:[e.jsxs("div",{className:"card-header",children:[e.jsx("i",{className:"bi bi-info-circle"}),e.jsx("h3",{children:"Assignment Details"})]}),p?e.jsxs("div",{className:"details-list",children:[e.jsxs("div",{className:"detail-row",children:[e.jsx("span",{className:"detail-label",children:"Class"}),e.jsx("span",{className:"detail-value",children:p})]}),e.jsxs("div",{className:"detail-row",children:[e.jsx("span",{className:"detail-label",children:"Subject"}),e.jsx("span",{className:"detail-value",children:h})]}),e.jsxs("div",{className:"detail-row",children:[e.jsx("span",{className:"detail-label",children:"Type"}),e.jsx("span",{className:"detail-value",children:f||"MCQ"})]}),e.jsxs("div",{className:"detail-row",children:[e.jsx("span",{className:"detail-label",children:"Due Date"}),e.jsx("span",{className:"detail-value",children:m})]})]}):e.jsx("div",{className:"empty-state",children:e.jsx("p",{children:"No details provided. Please go back and select assignment details."})})]})}),e.jsx("div",{className:"form-column",children:e.jsxs("form",{onSubmit:T,className:"questions-form",children:[c.map((o,a)=>e.jsxs("div",{className:"glass-panel question-block",children:[e.jsxs("div",{className:"question-header",children:[e.jsxs("span",{className:"question-number",children:["Q",a+1]}),e.jsx("div",{className:"question-actions",children:c.length>1&&e.jsx("button",{type:"button",className:"icon-btn delete-btn",onClick:()=>l(a),title:"Remove Question",children:e.jsx("i",{className:"bi bi-trash"})})})]}),e.jsx("div",{className:"form-group",children:e.jsx("input",{type:"text",placeholder:"Enter your question here...",value:o.question,onChange:s=>C(a,"question",s.target.value),className:"modern-input question-input",required:!0})}),e.jsx("div",{className:"options-grid",children:o.options.map((s,d)=>{const S=String.fromCharCode(65+d),N=o.correctOption===S;return e.jsxs("div",{className:`option-item ${N?"correct":""}`,children:[e.jsxs("div",{className:"option-input-wrapper",children:[e.jsx("span",{className:"option-badge",children:S}),e.jsx("input",{type:"text",placeholder:`Option ${S}`,value:s,onChange:b=>C(a,"option",b.target.value,d),className:"modern-input option-input",required:!0})]}),e.jsxs("label",{className:"correct-radio",title:"Mark as correct answer",children:[e.jsx("input",{type:"radio",name:`correct-${a}`,checked:N,onChange:()=>C(a,"correctOption",S)}),e.jsx("i",{className:`bi ${N?"bi-check-circle-fill":"bi-circle"}`})]})]},d)})})]},a)),e.jsxs("div",{className:"form-actions",children:[e.jsxs("button",{type:"button",onClick:v,className:"btn secondary-btn",children:[e.jsx("i",{className:"bi bi-plus-lg"})," Add Question"]}),e.jsxs("button",{type:"submit",className:"btn primary-btn",children:[e.jsx("i",{className:"bi bi-send-fill"})," Publish Assignment"]})]})]})})]})]})})},V=({studentId:i,name:j,className:r="student-avatar"})=>{const[y,x]=n.useState(!1),p=Object.assign({}),g=(()=>{const m=["jpg","jpeg","png","svg"];for(const f of m){const c=`../assets/student_dp/${i}.${f}`;if(p[c])return p[c].default}return null})();return y||!g?e.jsx("div",{className:r,children:j?j.charAt(0).toUpperCase():"?"}):e.jsx("img",{src:g,alt:j,className:r,onError:()=>x(!0),style:{objectFit:"cover"}})},le=()=>{const[i,j]=n.useState({}),[r,y]=n.useState(null),[x,p]=n.useState([]),[h,g]=n.useState({}),[m,f]=n.useState({}),c="http://192.168.0.105",u=sessionStorage.getItem("jwtToken"),{showSnackbar:v}=I();n.useEffect(()=>{(async()=>{try{const d=await(await O(`${c}/api/Teacher/GetStudents`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${u}`}})).json(),S={1:"Class 1",2:"Class 2",3:"Class 3",4:"Class 4"},N=d.reduce((w,$)=>{const A=$.s_Id,F=S[A]||`Class ${A}`;return w[A]||(w[A]={name:F,students:[]}),w[A].students.push({id:$.std_Id,name:$.std_Name}),w},{}),b={};Object.keys(N).forEach(w=>{b[w]={totalStudents:N[w].students.length,presentToday:0,absentToday:0}}),j(N),g(b);const k={};await Promise.all(Object.keys(N).map(async w=>{try{const $=await O(`${c}/api/Teacher/AttendanceStatus?standardId=${w}`,{method:"GET",headers:{Authorization:`Bearer ${u}`}});if($.ok){const A=await $.json();k[w]=A.status}}catch($){console.error(`Error fetching status for class ${w}:`,$)}})),f(k)}catch(s){console.error("Error fetching students:",s)}})()},[]);const l=a=>{m[a]!=="Marked"&&(y(a),p(i[a].students.map(s=>({...s,present:!1}))))},C=()=>{y(null),p([])},T=a=>{p(s=>s.map(d=>d.id===a?{...d,present:!d.present}:d))},o=async a=>{a.preventDefault();const s={standardId:parseInt(r),students:x.map(d=>({studentId:d.id,present:d.present}))};try{const d=await O(`${c}/api/Teacher/MarkAttendance`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${u}`},body:JSON.stringify(s)});if(d.ok)v(`Attendance for ${i[r].name} submitted âœ…`,"success"),f(S=>({...S,[r]:"Marked"})),C();else{const S=await d.text();v("âŒ Failed to submit attendance: "+S,"error")}}catch(d){console.error("Error submitting attendance:",d),v("Error while submitting attendance!","error")}};return r?e.jsxs("div",{className:"attendance-container fade-in",children:[e.jsxs("div",{className:"attendance-header",children:[e.jsxs("div",{className:"header-title-group",children:[e.jsxs("button",{onClick:C,className:"back-btn",children:[e.jsx("i",{className:"bi bi-arrow-left"})," Back"]}),e.jsxs("h2",{children:[e.jsx("i",{className:"bi bi-clipboard-check-fill header-icon"}),"Mark Attendance",e.jsx("span",{className:"class-badge",children:i[r]?.name})]})]}),e.jsx("div",{className:"header-actions",children:e.jsxs("div",{className:"date-display",children:[e.jsx("i",{className:"bi bi-calendar-event"}),new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]})})]}),e.jsxs("form",{onSubmit:o,className:"attendance-form glass-panel",children:[e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"attendance-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:"60px"},children:"#"}),e.jsx("th",{children:"Student Name"}),e.jsx("th",{style:{width:"150px",textAlign:"center"},children:"Status"})]})}),e.jsx("tbody",{children:x.map((a,s)=>e.jsxs("tr",{className:a.present?"row-present":"row-absent",children:[e.jsx("td",{children:s+1}),e.jsx("td",{children:e.jsxs("div",{className:"student-info",children:[e.jsx(V,{studentId:a.id,name:a.name,className:"student-avatar"}),e.jsx("span",{className:"student-name",children:a.name})]})}),e.jsxs("td",{className:"text-center",children:[e.jsxs("label",{className:"toggle-switch",children:[e.jsx("input",{type:"checkbox",checked:a.present,onChange:()=>T(a.id)}),e.jsx("span",{className:"slider round"})]}),e.jsx("span",{className:`status-label ${a.present?"present":"absent"}`,children:a.present?"Present":"Absent"})]})]},a.id))})]})}),e.jsxs("div",{className:"attendance-footer",children:[e.jsxs("div",{className:"summary-stats",children:[e.jsxs("span",{children:["Total: ",e.jsx("strong",{children:x.length})]}),e.jsxs("span",{children:["Present: ",e.jsx("strong",{className:"text-success",children:x.filter(a=>a.present).length})]}),e.jsxs("span",{children:["Absent: ",e.jsx("strong",{className:"text-danger",children:x.filter(a=>!a.present).length})]})]}),e.jsxs("button",{type:"submit",className:"btn submit-btn",children:[e.jsx("i",{className:"bi bi-check-circle-fill"})," Submit Attendance"]})]})]})]}):e.jsxs("div",{className:"dashboard-content fade-in",children:[e.jsxs("div",{className:"welcome-section",children:[e.jsxs("h2",{children:[e.jsx("i",{className:"bi bi-calendar-check"})," Attendance Management"]}),e.jsx("p",{children:"Select a class below to view students and mark attendance for today."})]}),e.jsx("div",{className:"dashboard-cards",children:Object.keys(i).length===0?e.jsxs("div",{className:"loading-state",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{children:"Loading classes..."})]}):Object.keys(i).map(a=>{const s=m[a]==="Marked";return e.jsxs("div",{className:`card class-card glass-panel ${s?"disabled":""}`,onClick:()=>l(a),style:{opacity:s?.7:1,cursor:s?"not-allowed":"pointer"},children:[e.jsx("div",{className:"card-icon-wrapper",children:e.jsx("i",{className:`bi ${s?"bi-check-circle-fill":"bi-people-fill"}`})}),e.jsxs("div",{className:"card-content",children:[e.jsx("h3",{children:i[a].name}),e.jsxs("div",{className:"class-stats-grid",children:[e.jsxs("div",{className:"stat-item",children:[e.jsx("span",{className:"stat-label",children:"Total"}),e.jsx("span",{className:"stat-value",children:h[a]?.totalStudents||0})]}),e.jsxs("div",{className:"stat-item",children:[e.jsx("span",{className:"stat-label",children:"Status"}),e.jsx("span",{className:`stat-value ${s?"text-success":"text-warning"}`,children:s?"Marked":"Pending"})]})]})]}),e.jsxs("div",{className:"card-action",children:[e.jsx("span",{children:s?"Attendance Marked":"Mark Attendance"}),e.jsx("i",{className:`bi ${s?"bi-check":"bi-arrow-right"}`})]})]},a)})})]})},re=()=>{const i=U(),j=M(),{showSnackbar:r}=I(),y="http://192.168.0.105",x=sessionStorage.getItem("jwtToken"),{selectedClass:p,selectedSubject:h,assignmentDate:g,dueDate:m,selectedCategory:f}=i.state||{},[c,u]=n.useState([{question:""}]),v=()=>{u([...c,{question:""}])},l=o=>{c.length>1?u(c.filter((a,s)=>s!==o)):r("At least one question is required!","warning")},C=(o,a)=>{const s=[...c];s[o].question=a,u(s)},T=async o=>{o.preventDefault();const a={title:h+" - Question Answer",description:"Question-Answer assignment",dueDate:m,teacherId:1,standardId:p,assignmentType:f,questions:c.map(s=>({questionText:s.question}))};try{const s=await O(`${y}/api/Teacher/AddAssignment`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${x}`},body:JSON.stringify(a)});if(s.ok)r("âœ… Question-Answer Assignment Created Successfully!","success"),j("/teacher/dashboard/assignments");else{const d=await s.text();r("âŒ Failed to create: "+d,"error")}}catch(s){console.error(s),r("Error while creating Question-Answer assignment!","error")}};return e.jsx("div",{className:"create-assignment-page fade-in",children:e.jsxs("div",{className:"assignment-container",children:[e.jsxs("div",{className:"page-header",children:[e.jsxs("h1",{className:"page-title",children:[e.jsx("i",{className:"bi bi-pencil-square header-icon"}),"Create Question Answer Assignment"]}),e.jsxs("button",{className:"back-btn",onClick:()=>j(-1),children:[e.jsx("i",{className:"bi bi-arrow-left"})," Back"]})]}),e.jsxs("div",{className:"content-grid",children:[e.jsx("div",{className:"details-card",children:e.jsxs("div",{className:"glass-panel",children:[e.jsxs("div",{className:"card-header",children:[e.jsx("i",{className:"bi bi-info-circle"}),e.jsx("h3",{children:"Assignment Details"})]}),e.jsx("div",{className:"details-list",children:p?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"detail-row",children:[e.jsx("span",{className:"detail-label",children:"Class"}),e.jsx("div",{className:"detail-value",children:p})]}),e.jsxs("div",{className:"detail-row",children:[e.jsx("span",{className:"detail-label",children:"Subject"}),e.jsx("div",{className:"detail-value",children:h})]}),e.jsxs("div",{className:"detail-row",children:[e.jsx("span",{className:"detail-label",children:"Date"}),e.jsx("div",{className:"detail-value",children:g})]}),e.jsxs("div",{className:"detail-row",children:[e.jsx("span",{className:"detail-label",children:"Due Date"}),e.jsx("div",{className:"detail-value",children:m})]})]}):e.jsx("div",{className:"empty-state",children:"No details available"})})]})}),e.jsxs("form",{onSubmit:T,className:"questions-form",children:[c.map((o,a)=>e.jsxs("div",{className:"glass-panel question-block",children:[e.jsxs("div",{className:"question-header",children:[e.jsxs("span",{className:"question-number",children:["Question ",a+1]}),c.length>1&&e.jsx("button",{type:"button",className:"icon-btn delete-btn",onClick:()=>l(a),title:"Remove Question",children:e.jsx("i",{className:"bi bi-trash"})})]}),e.jsx("div",{className:"form-group",children:e.jsx("input",{type:"text",placeholder:"Enter your question here...",value:o.question,onChange:s=>C(a,s.target.value),className:"modern-input question-input",required:!0})})]},a)),e.jsxs("div",{className:"form-actions",children:[e.jsxs("button",{type:"button",onClick:v,className:"btn secondary-btn",children:[e.jsx("i",{className:"bi bi-plus-lg"})," Add More Question"]}),e.jsxs("button",{type:"submit",className:"btn primary-btn",children:[e.jsx("i",{className:"bi bi-check-lg"})," Submit Assignment"]})]})]})]})]})})},oe=()=>{const i=U(),j=M(),{showSnackbar:r}=I(),y="http://192.168.0.105",x=sessionStorage.getItem("jwtToken"),{selectedClass:p,selectedSubject:h,assignmentDate:g,dueDate:m}=i.state||{},[f,c]=n.useState([{question:""}]),[u,v]=n.useState("url"),[l,C]=n.useState(""),[T,o]=n.useState(null),a=()=>{c([...f,{question:""}])},s=N=>{f.length>1?c(f.filter((b,k)=>k!==N)):r("At least one question is required!","warning")},d=(N,b,k)=>{const w=[...f];w[N][b]=k,c(w)},S=async N=>{N.preventDefault();const b=new FormData;b.append("title",h+" - Video Comprehension"),b.append("description","Video-based comprehension assignment"),b.append("dueDate",m),b.append("teacherId",1),b.append("standardId",p),b.append("videoType",u),u==="url"?b.append("videoUrl",l):b.append("videoFile",T),f.forEach((k,w)=>{b.append(`questions[${w}][questionText]`,k.question)});try{const k=await O(`${y}/api/Teacher/AddVideoComprehension`,{method:"POST",headers:{Authorization:`Bearer ${x}`},body:b});if(k.ok)r("ðŸŽ¥ Video Comprehension Created Successfully!","success"),j("/teacher/dashboard/assignments");else{const w=await k.text();r("âŒ Failed to create: "+w,"error")}}catch(k){console.error(k),r("Error while creating video comprehension!","error")}};return e.jsx("div",{className:"create-assignment-page",children:e.jsxs("div",{className:"assignment-card",children:[e.jsx("h2",{className:"assignment-title",children:"ðŸŽ¥ Create Video Comprehension"}),p&&h&&g&&m&&e.jsxs("div",{className:"assignment-details",children:[e.jsx("h3",{children:"Assignment Details"}),e.jsxs("div",{className:"details-grid",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("strong",{children:"Class:"}),e.jsx("p",{children:p})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("strong",{children:"Subject:"}),e.jsx("p",{children:h})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("strong",{children:"Assignment Date:"}),e.jsx("p",{children:g})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("strong",{children:"Due Date:"}),e.jsx("p",{children:m})]})]})]}),e.jsxs("form",{onSubmit:S,children:[e.jsxs("div",{className:"video-input-section",children:[e.jsx("h3",{children:"Video Source"}),e.jsxs("div",{className:"video-type-selection",children:[e.jsxs("label",{children:[e.jsx("input",{type:"radio",value:"url",checked:u==="url",onChange:N=>v(N.target.value)}),"YouTube URL"]}),e.jsxs("label",{children:[e.jsx("input",{type:"radio",value:"file",checked:u==="file",onChange:N=>v(N.target.value)}),"Upload Video File"]})]}),e.jsx("br",{}),u==="url"?e.jsx("input",{type:"url",placeholder:"Enter YouTube video URL...",value:l,onChange:N=>C(N.target.value),className:"input video-url-input",required:!0}):e.jsx("input",{type:"file",accept:"video/*",onChange:N=>o(N.target.files[0]),className:"input video-file-input",required:!0})]}),f.map((N,b)=>e.jsxs("div",{className:"question-block",children:[e.jsxs("div",{className:"question-header",children:[e.jsxs("h3",{className:"question-heading",children:["Question ",b+1]}),f.length>1&&e.jsx("button",{type:"button",className:"remove-btn",onClick:()=>s(b),children:"âœ–"})]}),e.jsx("input",{type:"text",placeholder:"Enter question...",value:N.question,onChange:k=>d(b,"question",k.target.value),className:"input question-input",required:!0})]},b)),e.jsxs("div",{className:"button-row",children:[e.jsx("button",{type:"button",onClick:a,className:"btn add-btn",children:"+ Add More Question"}),e.jsx("button",{type:"submit",className:"btn submit-btn",children:"Submit Assignment"})]})]})]})})},de=()=>{const[i,j]=n.useState({}),[r,y]=n.useState(!0),x="http://192.168.0.105",p=sessionStorage.getItem("jwtToken");return n.useEffect(()=>{(async()=>{try{const g=await O(`${x}/api/Teacher/GetStudents`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${p}`}});if(!g.ok)throw new Error("Failed to fetch students");const m=await g.json(),f={1:"Class 1",2:"Class 2",3:"Class 3",4:"Class 4"},c=m.reduce((u,v)=>{const l=v.s_Id,C=f[l]||`Class ${l}`;return u[l]||(u[l]={name:C,students:[]}),u[l].students.push({id:v.std_Id,name:v.std_Name,standardId:v.s_Id}),u},{});j(c),y(!1)}catch(g){console.error("Error fetching students:",g),y(!1)}})()},[]),r?e.jsxs("div",{className:"loading-state",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{children:"Loading students..."})]}):e.jsx("div",{className:"students-page fade-in",children:e.jsxs("div",{className:"students-container",children:[e.jsx("div",{className:"page-header",children:e.jsxs("h1",{className:"page-title",children:[e.jsx("i",{className:"bi bi-people-fill header-icon"}),"Students Directory"]})}),Object.keys(i).length===0?e.jsx("div",{className:"empty-state",children:"No students found."}):Object.keys(i).map(h=>e.jsxs("div",{className:"class-section",children:[e.jsxs("div",{className:"class-header",children:[e.jsx("h2",{className:"class-title",children:i[h].name}),e.jsxs("span",{className:"student-count",children:[i[h].students.length," Students"]})]}),e.jsx("div",{className:"students-grid",children:i[h].students.map(g=>e.jsxs("div",{className:"student-card",children:[e.jsx(V,{studentId:g.id,name:g.name,className:"student-avatar"}),e.jsxs("div",{className:"student-info",children:[e.jsx("span",{className:"student-name",children:g.name}),e.jsxs("span",{className:"student-id",children:["ID: ",g.id]})]})]},g.id))})]},h))]})})};function ue(){return e.jsx(Y,{children:e.jsxs(E,{path:"/dashboard/*",element:e.jsx(te,{}),children:[e.jsx(E,{index:!0,element:e.jsx(K,{to:"home"})}),e.jsx(E,{path:"home",element:e.jsx(ne,{})}),e.jsx(E,{path:"assignments",element:e.jsx(ie,{})}),e.jsx(E,{path:"createassignment",element:e.jsx(ce,{})}),e.jsx(E,{path:"attendance",element:e.jsx(le,{})}),e.jsx(E,{path:"students",element:e.jsx(de,{})}),e.jsx(E,{path:"createquestionanswer",element:e.jsx(re,{})}),e.jsx(E,{path:"createvideocomprehension",element:e.jsx(oe,{})})]})})}export{ue as default};
